<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// Sign-up
document.getElementById('btnSignUp').addEventListener('click', async () => {
  const email = document.getElementById('email').value;
  const pass = document.getElementById('password').value;
  try {
    await createUserWithEmailAndPassword(auth, email, pass);
    alert('Registrazione OK');
  } catch(e) {
    alert('Errore: ' + e.message);
  }
});

// Login
document.getElementById('btnSignIn').addEventListener('click', async () => {
  const email = document.getElementById('email').value;
  const pass = document.getElementById('password').value;
  try {
    await signInWithEmailAndPassword(auth, email, pass);
  } catch(e) {
    alert('Errore: ' + e.message);
  }
});

// Redirect se giÃ  loggato
onAuthStateChanged(auth, user => {
  if(user) window.location.href = '/myfencing/home04.html';
});
</script>
